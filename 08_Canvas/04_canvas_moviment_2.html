<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Canvas tutorial</title>

    <script type="text/javascript">
      var ctx;
      var inici = 100;
      var derecha = true;

      function dibujar() {
        if (ctx) {
          ctx.clearRect(0, 0, 3000, 3000); //netegem tot per a que no es solapen les imatges
          ctx.fillStyle = "red";
          ctx.fillRect(inici, 100, 100, 100);
          if (derecha) {
            inici = inici + 100;
          } else {
            inici = inici - 100;
          }
          if (inici == 1400){
            derecha=false;
          }
          if (inici == 0){
            derecha = true;
          }
          
          window.requestAnimationFrame(dibujar);
        }
      }

      function inicializar() {
        canvas = document.querySelector("#tutorial");

        //Esto es per a saber si existeix el canvas
        if (canvas.getContext) ctx = canvas.getContext("2d");
        var boton = document.getElementById("boton");
        boton.addEventListener("click", dibujar);
      }

      document.addEventListener("DOMContentLoaded", inicializar);
    </script>
    <style type="text/css">
      canvas {
        border: 1px solid black;
      }
    </style>
  </head>

  <body>
    <div>
      <button type="button" id="boton">Dibuja</button>
    </div>

    <canvas id="tutorial" width="1500" height="1500"></canvas>
  </body>
</html>
