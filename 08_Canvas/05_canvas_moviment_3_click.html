<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Canvas tutorial</title>

    <script type="text/javascript">
      var ctx;
      var iniciX = 100;
      var iniciY = 100;
      var derecha = true;
      var velX = -0.3;
      var velY = 1.3;

      function dibujar() {
        if (ctx) {
          ctx.clearRect(0, 0, 500, 500); //netegem tot per a que no es solapen les imatges
          ctx.fillStyle = "red";

          ctx.fillRect(iniciX, iniciY, 100, 100);
          window.requestAnimationFrame(dibujar);
        }
      }

      function temporizador() {
        iniciX += velX;
        iniciY += velY;

        if (iniciX <= 0) {
          velX = Math.abs(velX);
        }
        if (iniciX >= 500 - 100) {
          velX = -Math.abs(velX);
        }
        if (iniciY <= 0) {
          velY = Math.abs(velY);
        }
        if (iniciY >= 500 - 100) {
          velY = -Math.abs(velY);
        }
      }

      function inicializar() {
        canvas = document.querySelector("#tutorial");

        //Esto es per a saber si existeix el canvas
        if (canvas.getContext) ctx = canvas.getContext("2d");
        dibujar();
        window.setInterval(temporizador, 10);
      }

      document.addEventListener("DOMContentLoaded", inicializar);
    </script>
    <style type="text/css">
      canvas {
        border: 1px solid black;
      }
    </style>
  </head>

  <body>
    <div>
      <button type="button" id="boton">Dibuja</button>
    </div>

    <canvas id="tutorial" width="1500" height="1500"></canvas>
  </body>
</html>
