<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Canvas tutorial</title>

    <script type="text/javascript">
      var ctx;
      var anchura = 100;

      function dibujar() {
        if (ctx) {
          ctx.fillStyle = "red";
          ctx.fillRect(100, 100, anchura, 100);
          if (anchura < 800) {
            anchura = anchura + 5;
          }
          window.requestAnimationFrame(dibujar);
        }
      }

      function inicializar() {
        canvas = document.querySelector("#tutorial");

        //Esto es per a saber si existeix el canvas
        if (canvas.getContext) ctx = canvas.getContext("2d");
        var boton = document.getElementById("boton");
        boton.addEventListener("click", dibujar);
      }

      document.addEventListener("DOMContentLoaded", inicializar);
    </script>
    <style type="text/css">
      canvas {
        border: 1px solid black;
      }
    </style>
  </head>

  <body>
    <div>
      <button type="button" id="boton">Dibuja</button>
    </div>

    <canvas id="tutorial" width="1000" height="1000"></canvas>
  </body>
</html>
